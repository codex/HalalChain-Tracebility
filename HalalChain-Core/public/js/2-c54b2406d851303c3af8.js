webpackJsonp([2],{367:function(e,t,n){var a=n(975);"string"==typeof a&&(a=[[e.id,a,""]]);n(79)(a,{});a.locals&&(e.exports=a.locals)},705:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{user:e.user,come:e.come}}function d(e){return{comeActions:(0,O.bindActionCreators)(T,e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(32),f=r(c),p=n(147),m=r(p),h=n(47),b=r(h),g=n(82),w=r(g),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),v=n(1),k=r(v),O=n(44),P=(n(66),n(61)),E=(n(28),n(706)),_=r(E),I=n(707),S=r(I),C=n(71),j=r(C),N=n(128),A=r(N),M=n(70),T=a(M),F=n(104);n(367);var D=n(3),L=r(D),B=(f.default.Item,w.default.Option,function(e){function t(){var e,n,a,r;i(this,t);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={isLoading:!1,selectedRowKeys:[],count:1,dataSource:[],columns:[{title:"No.",width:"80px",dataIndex:"index"},{title:"Ear Tag No.",width:"160px",dataIndex:"productId",render:function(e,t,n){return k.default.createElement(S.default,{val:t.productId,index:n,onInputChange:a.handleProductBlur.bind(a)})}},{title:"Breed",width:"100px",dataIndex:"kind"},{title:"Farm",width:"100px",dataIndex:"currentOwner"},{title:"Animal Age",width:"130px",dataIndex:"days",render:function(e,t,n){return t.days}},{title:"Time",width:"120px",dataIndex:"kLairageTime"},{title:"Location",width:"120px",dataIndex:"mapPosition"},{title:"IOT Terminals",dataIndex:"iName"},{title:"Pre Quarantine",dataIndex:"kCondition",width:"180px",render:function(e,t,n){if(!t.productId)return"";var r=a.props.form.getFieldDecorator;return r("kCondition_"+n,{initialValue:t.kCondition})(k.default.createElement(b.default,null))}}]},r=n,l(a,r)}return u(t,e),x(t,[{key:"componentWillMount",value:function(){document.title="Slaugher"}},{key:"handleProductBlur",value:function(e,t){var n=this;if(e){var a=JSON.stringify({ProductId:e}),r=this.state,o=(r.count,r.dataSource);this.props.comeActions.getProductDetail({data:{fcn:"QueryProductDetail",args:["QueryProductDetail",a],peers:A.default},success:function(e){o.map(function(n,a){a==t&&(n=y({},n,JSON.parse(e.payloads[0]),{currentOwner:F.farmArray[0].name,mapPosition:"106.215941,37.992396",iName:"Inspector",kCondition:"Qualified",kLairageTime:(0,L.default)().format("YYYY-MM-DD HH:mm:ss")}),o[a]=n)}),n.setState({dataSource:o})},fail:function(){console.log("fail")}})}}},{key:"gotoLink",value:function(e){this.props.router.push(e)}},{key:"handleTableCell",value:function(e){console.log(e)}},{key:"handleAdd",value:function(){var e=this.state,t=e.count,n=e.dataSource,a={index:t,productId:"",kind:"",days:"",mapPosition:"",iName:"",kCondition:"良好"};this.setState({dataSource:[].concat(o(n),[a]),count:t+1})}},{key:"submit",value:function(){var e=this,t=[],n=this;return this.state.selectedRowKeys.length?void this.props.form.validateFields(function(a,r){var o=r.killModule,i=r.killPenNum;a||e.state.dataSource.map(function(a,l){e.state.selectedRowKeys.map(function(e,u){if(a.index===e+1){var s=JSON.stringify({productId:a.productId,kLairageTime:a.kLairageTime,kCondition:r["kCondition_"+l],killModule:o,comment:"Waiting Slaughter",mapPosition:a.mapPosition,operator:a.iName,killPenNum:i}),d=JSON.stringify({productId:a.productId});t.push(new Promise(function(e,t){n.props.comeActions.commonAjax({data:{fcn:"ConfirmChangeOwner",args:["ConfirmChangeOwner",d],peers:A.default},success:function(){n.props.comeActions.commonAjax({data:{fcn:"ChangeProduct",args:["ChangeProduct",s],peers:A.default},success:function(){e("Success")},fail:function(){t("Failed")}})},fail:function(){t("Failed")}})})),n.setState({isLoading:!0}),Promise.all(t).then(function(e){e.length===t.length&&(n.setState({isLoading:!1}),j.default.success("Success",1,function(){window.location.reload()}))},function(e){n.setState({isLoading:!1}),j.default.success("Failed",1)})}})})}):void j.default.warning("Please input the Slaughter item")}},{key:"render",value:function(){var e=this,t=(this.props.form.getFieldDecorator,this.state.isLoading),n={columns:this.state.columns,dataSource:this.state.dataSource,rowSelection:{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}}};return k.default.createElement("div",{className:"slaughterhouse-wrapper"},k.default.createElement("div",{className:"content"},k.default.createElement(_.default,{listProps:n,handleAdd:this.handleAdd.bind(this),submit:this.submit.bind(this),form:this.props.form})),t&&k.default.createElement("div",{className:"loading-wrap"},k.default.createElement(m.default,{size:"large"})))}}]),t}(v.Component));B=f.default.create()(B),t.default=(0,P.connect)(s,d)(B)},706:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),o=a(r),i=n(148),l=a(i),u=n(81),s=a(u),d=n(80),c=a(d),f=n(47),p=a(f),m=n(32),h=a(m),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g=n(1),w=a(g),y=n(4);a(y),n(28);n(367),n(1005);var x=n(3),v=a(x),k=h.default.Item,O={labelCol:{span:12},wrapperCol:{span:12}},P=(0,v.default)().format("YYYYMMDD"),E="TZBS20180327"+P+parseInt(1e3*Math.random()),_=function(e){var t=e.listProps,n=e.submit,a=e.handleAdd,r=e.form,i=r.getFieldDecorator;return w.default.createElement("div",{className:"table-wrap list-wrap"},w.default.createElement("p",{className:"title"},"For Slaughter Entry Operation"),w.default.createElement("div",{className:"main-table"},w.default.createElement(s.default,null,w.default.createElement(c.default,{span:10},w.default.createElement(k,b({label:"Slaughter Batches"},O),i("killModule",{initialValue:E,rules:[{required:!0,message:"Please input Batches"}]})(w.default.createElement(p.default,null)))),w.default.createElement(c.default,{span:10},w.default.createElement(k,b({label:"Housing"},O),i("killPenNum",{initialValue:"",rules:[{required:!0,message:"Please input Housing"}]})(w.default.createElement(p.default,null))))),w.default.createElement(l.default,b({},t,{scroll:{x:1300},pagination:!1,simple:!0,rowKey:function(e,t){return t}})),w.default.createElement("div",null,w.default.createElement("div",{className:"btn-wrap"},w.default.createElement(o.default,{onClick:function(){a()},className:"submit-btn-add"},"Add"),w.default.createElement(o.default,{onClick:function(){n()},className:"submit-btn"},"Confirm")))))};t.default=_},707:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(32),u=a(l),s=n(47),d=a(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),p=a(f),m=function(e){function t(){var e,n,a,i;r(this,t);for(var l=arguments.length,u=Array(l),s=0;s<l;s++)u[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={},i=n,o(a,i)}return i(t,e),c(t,[{key:"handleBlur",value:function(){var e=this.props,t=e.onInputChange,n=e.index,a=this.props.form,r=(a.getFieldDecorator,a.getFieldValue),o=r("productId");t(o,n)}},{key:"render",value:function(){var e=this.props,t=e.val,n=(e.onInputChange,this.props.form),a=n.getFieldDecorator;n.getFieldValue;return p.default.createElement("p",null,a("productId",{initialValue:t.productId})(p.default.createElement(d.default,{onBlur:this.handleBlur.bind(this)})))}}]),t}(p.default.Component);m=u.default.create()(m),t.default=m},975:function(e,t,n){t=e.exports=n(76)(),t.push([e.id,".slaughterhouse-wrapper .content{width:100%;box-shadow:0 0 10px #ddd}.slaughterhouse-wrapper .content .btn-wrap{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.slaughterhouse-wrapper .content .submit-btn,.slaughterhouse-wrapper .content .submit-btn-add{background:#6ec1ff;width:120px;height:40px;line-height:40px;margin-top:22px;font-size:16px;color:#fff;border-radius:100px}.slaughterhouse-wrapper .content .submit-btn-add{margin-right:20px;background:#4ecb73}.slaughterhouse-wrapper .loading-wrap{position:fixed;top:200px;left:50%}",""])},976:function(e,t,n){t=e.exports=n(76)(),t.push([e.id,".table-wrap{padding:30px;background:#3399cd;border-radius:10px}.table-wrap .title{color:#fff;font-size:20px}.table-wrap .main-table{margin-top:25px;background:#fff;border-radius:30px;padding:38px 35px 22px;box-shadow:0 0 10px #ddd}.table-wrap .main-table .filter-title{font-size:24px;color:#323232}.table-wrap .main-table .ant-table-thead{background:#f5f8ff}.table-wrap .main-table .ant-table-thead span{font-size:18px;color:#323232}.img-wrap{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.img-wrap .img{margin-right:15px;width:150px;height:150px}",""])},1005:function(e,t,n){var a=n(976);"string"==typeof a&&(a=[[e.id,a,""]]);n(79)(a,{});a.locals&&(e.exports=a.locals)}});